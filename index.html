<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="referrer" content="no-referrer" />
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/img/title.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/img/title.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/img/title.ico">
  <link rel="mask-icon" href="/img/title.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.31/dist/fancybox/fancybox.css" integrity="sha256-gkQVf8UKZgQ0HyuxL/VnacadJ+D2Kox2TCEBuNQg5+w=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"qingy735.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":false,"copycode":{"enable":true,"show_result":true,"style":"mac"},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="QingY&#39;s Code Space">
<meta property="og:url" content="https://qingy735.github.io/index.html">
<meta property="og:site_name" content="QingY&#39;s Code Space">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="QingY">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://qingy735.github.io/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>QingY's Code Space</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">QingY's Code Space</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-commonweal"><a href="/404/" rel="section"><i class="heartbeat fa-fw"></i>公益 404</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="QingY"
      src="/img/title.ico">
  <p class="site-author-name" itemprop="name">QingY</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">30</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">45</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/qingy735" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;qingy735" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:qingy735@qq.com" title="E-Mail → mailto:qingy735@qq.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://qingy735.github.io/posts/43973.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/img/title.ico">
      <meta itemprop="name" content="QingY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QingY's Code Space">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | QingY's Code Space">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/43973.html" class="post-title-link" itemprop="url">Java八股-MySQL篇</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-05-20 18:24:37" itemprop="dateCreated datePublished" datetime="2024-05-20T18:24:37+08:00">2024-05-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-05-21 18:06:18" itemprop="dateModified" datetime="2024-05-21T18:06:18+08:00">2024-05-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%85%AB%E8%82%A1/" itemprop="url" rel="index"><span itemprop="name">八股</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="java八股-mysql篇"><a class="markdownIt-Anchor" href="#java八股-mysql篇"></a> Java八股-MySQL篇</h1>
<h2 id="mysql优化"><a class="markdownIt-Anchor" href="#mysql优化"></a> MySQL优化</h2>
<h3 id="如何定位慢查询"><a class="markdownIt-Anchor" href="#如何定位慢查询"></a> 如何定位慢查询</h3>
<blockquote>
<p>聚合查询、多表查询、表数据量过大查询、深度分页查询</p>
</blockquote>
<ul>
<li>开源工具
<ul>
<li>调试工具：Arthas</li>
<li>运维工具：Prometheus、Skywalking</li>
</ul>
</li>
<li>MySQL自带慢查询日志（slow_query_log、long_query_time）</li>
</ul>
<h3 id="如何分析慢查询"><a class="markdownIt-Anchor" href="#如何分析慢查询"></a> 如何分析慢查询</h3>
<p><strong>explain</strong>或者<strong>desc</strong>获取MySQL如何执行select语句的信息</p>
<ul>
<li>possible_keys：当前sql可能用到的索引</li>
<li>key：当前sql实际命中的索引</li>
<li>key_len：索引占用的大小</li>
<li>type：sql连接的类型，NULL、system、const、eq_ref、ref、range、index、all</li>
</ul>
<h3 id="什么是索引"><a class="markdownIt-Anchor" href="#什么是索引"></a> 什么是索引</h3>
<blockquote>
<p>索引是帮助MySQL高效获取数据的数据结构（有序）</p>
</blockquote>
<p>采用B+树作为数据结构存储索引</p>
<ul>
<li>阶数更多。路径更短</li>
<li>磁盘读写代价B+树更低，非叶子结点只存储指针，叶子结点存储数据</li>
<li>B+树便于扫库和区间查询，叶子结点是一个双向链表</li>
</ul>
<h3 id="聚簇索引非聚簇索引会回表查询覆盖索引"><a class="markdownIt-Anchor" href="#聚簇索引非聚簇索引会回表查询覆盖索引"></a> 聚簇索引？非聚簇索引？会回表查询？覆盖索引？</h3>
<ul>
<li>聚簇索引：数据和索引放一块，B+树的叶子结点保存整行数据，有且只有一个</li>
<li>非聚簇索引（二级索引）：数据和索引分开存储，B+树的叶子结点保存对应的主键，可以有多个</li>
<li>回表查询：通过二级索引找到对应的主键值，到聚簇索引中查找整行数据</li>
<li>覆盖索引：查询使用了索引，并且需要返回的列在该索引中已经全部能够找到</li>
</ul>
<h3 id="mysql超大分页处理"><a class="markdownIt-Anchor" href="#mysql超大分页处理"></a> MySQL超大分页处理</h3>
<blockquote>
<p>在数据量比较大时，如果进行limit分页查询，在查询时越往后分页查询效率越低</p>
</blockquote>
<p>优化思路：一般分页查询时，通过创建覆盖索引能够比较好地提升性能，可以通过覆盖索引加子查询形式优化。</p>
<p>超大分页一般都是在数据量比较大时，我们使用limit分页查询，并且需要对数据进行排序，这个时候效率就很低，我们可以采用覆盖索引+子查询来解决。</p>
<p>先分页查询数据id字段，确定了id之后又，再用子查询来过滤，只查询这个id列表中的数据就可以了，因为查询id的时候，走的覆盖索引，所以效率可以提升很多。</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select * 
from User_table a,
	(select id from User_table order by id limit 1000000,10) b 
where a.id &#x3D; b.id<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="索引创建原则"><a class="markdownIt-Anchor" href="#索引创建原则"></a> 索引创建原则</h3>
<ul>
<li><strong>针对数据量较大，且查询比较频繁的表建立索引（10w）</strong></li>
<li><strong>针对常作为查询条件（where）、排序（order by）、分组（group by）操作的字段建立索引</strong></li>
<li>选择区分度高的列作为索引，尽量建立唯一索引，区分度越高，使用索引的效率越高</li>
<li>如果是字符串类型的字段，字段的长度较长，可以针对于字段的特点，建立前缀索引</li>
<li><strong>尽量使用联合索引，减少单列索引，查询时联合索引很多时候可以使用覆盖索引，节省存储空间，避免回表，提高查询效率</strong></li>
<li><strong>控制索引数量，影响增删改效率</strong></li>
<li>如果索引列不能存储NULL，创建表时使用NOT NULL约束，优化器知道每列是否包含NULL值时，可以更好地确定哪个索引更有效地用于查询</li>
</ul>
<h3 id="索引失效"><a class="markdownIt-Anchor" href="#索引失效"></a> 索引失效</h3>
<blockquote>
<p>联合索引：（a，b，c）</p>
</blockquote>
<ul>
<li>
<p>违反最左前缀法则</p>
<p>a=A，c=C时会只使用a索引</p>
</li>
<li>
<p>范围查询右边的列不能使用索引</p>
<p>a=A，b&gt;B时用不到c索引</p>
</li>
<li>
<p>索引列上进行运算操作</p>
<p>类似substring(a, 0, 2)，索引失效</p>
</li>
<li>
<p>字符串不加单引号</p>
<p>查询时，没有对字符串加单引号，MySQL的查询优化器会自动进行类型转换造成索引失效</p>
</li>
<li>
<p>模糊查询</p>
<p>%like会失效，like%不会</p>
</li>
</ul>
<h3 id="sql优化"><a class="markdownIt-Anchor" href="#sql优化"></a> sql优化</h3>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20240521161345554.png" alt="image-20240521161345554" /></p>
<h2 id="事务"><a class="markdownIt-Anchor" href="#事务"></a> 事务</h2>
<h3 id="事务特性"><a class="markdownIt-Anchor" href="#事务特性"></a> 事务特性</h3>
<blockquote>
<p>ACID；原子性、一致性、隔离性、持久性</p>
</blockquote>
<h3 id="并发事务带来了哪些问题"><a class="markdownIt-Anchor" href="#并发事务带来了哪些问题"></a> 并发事务带来了哪些问题</h3>
<blockquote>
<p>脏读：一个事务读到另一个事务还没提交的数据</p>
<p>不可重复度：一个事务先后读取同一条数据，但是两次读取数据不同</p>
<p>幻读：一个事务按照条件查询数据时，没有对应的数据行，但是插入数据时又发现这行数据已经存在</p>
</blockquote>
<h4 id="隔离级别"><a class="markdownIt-Anchor" href="#隔离级别"></a> 隔离级别：</h4>
<table>
<thead>
<tr>
<th style="text-align:center">隔离级别</th>
<th style="text-align:center">脏读</th>
<th style="text-align:center">不可重复读</th>
<th style="text-align:center">幻读</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Read uncommitted 读未提交</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">Read committed 读已提交</td>
<td style="text-align:center">×</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">Repeatable Read 可重复度</td>
<td style="text-align:center">×</td>
<td style="text-align:center">×</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">Serializable 串行化</td>
<td style="text-align:center">×</td>
<td style="text-align:center">×</td>
<td style="text-align:center">×</td>
</tr>
</tbody>
</table>
<h3 id="undo-log和redo-log"><a class="markdownIt-Anchor" href="#undo-log和redo-log"></a> undo log和redo log</h3>
<ul>
<li>缓冲池（buffer pool）：主内存中的一个区域，里面可以缓存磁盘上经常操作的真实数据，增删改查时先操作缓冲池中的数据（没有就从磁盘上加载并缓存），以一定频率刷新到磁盘，从而减少磁盘IO，加快处理速度</li>
<li>数据页（page）：是InnoDB存储引擎磁盘管理的最小单元，每个页大小默认为16KB，页中存储的是行数据</li>
</ul>
<h4 id="redo-log"><a class="markdownIt-Anchor" href="#redo-log"></a> redo log</h4>
<p>重做日志，记录的是事务提交时数据页的物理修改，是<strong>用来实现事务的持久性</strong></p>
<p>该文件由两部分组成：重做日志缓冲（redo log buffer）以及重做日志文件（redo log file），前者在内存中，后者在磁盘中。当事务提交之后会把所有修改信息都存在该日志文件中，用于在刷新脏页到磁盘发生错误时进行数据恢复使用。</p>
<h4 id="undo-log"><a class="markdownIt-Anchor" href="#undo-log"></a> undo log</h4>
<p>回滚日志，用于记录数据被修改前的信息，作用包含两个：<strong>提供回滚</strong>和<strong>MVCC</strong>。undo log和redo log记录物理日志不一样，它是<strong>逻辑日志</strong>。</p>
<ul>
<li>delete一条记录时，undo log中会记录一条对应的insert记录，反之亦然</li>
<li>update一条数据时，记录一条相反的update记录</li>
</ul>
<p><strong>undo log可以实现事务的一致性和原子性</strong></p>
<h4 id="redo-log和undo-log区别"><a class="markdownIt-Anchor" href="#redo-log和undo-log区别"></a> redo log和undo log区别</h4>
<ul>
<li>redo log记录的是数据页的物理变化，服务器宕机可以用来同步数据</li>
<li>undo log记录的是逻辑日志，当事务回滚时通过逆操作恢复原来数据</li>
<li>redo log保证事务持久性，undo log保证事务原子性和一致性</li>
</ul>
<h3 id="mvcc多版本并发控制"><a class="markdownIt-Anchor" href="#mvcc多版本并发控制"></a> MVCC（多版本并发控制）</h3>
<h4 id="实现原理"><a class="markdownIt-Anchor" href="#实现原理"></a> 实现原理</h4>
<ul>
<li>
<p>记录中的隐藏字段</p>
<table>
<thead>
<tr>
<th style="text-align:center">隐藏字段</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">DB_TRX_ID</td>
<td style="text-align:center">最近一次修改事务ID，记录插入这条记录或最后一次修改该记录的事务ID</td>
</tr>
<tr>
<td style="text-align:center">DB_ROLL_PTR</td>
<td style="text-align:center">回滚指针，指向这条记录的上一个版本，用于配合undo log，指向上个版本</td>
</tr>
<tr>
<td style="text-align:center">DB_ROW_ID</td>
<td style="text-align:center">隐藏主键，如果表结构没有指定主键，将会生成该隐藏字段</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>undo log</p>
<p>当insert时产生的undo log日志只在回滚时需要，在事务提交后可被立即删除</p>
<p>update、delete的时候产生的undo log日志不仅回滚时需要，mvcc版本访问时也需要，不会立即删除</p>
</li>
<li>
<p>undo log版本链</p>
<p>不同事务或相同事务对同一条记录进行修改，会导致该记录的undo log生成一条记录版本链表，链表的头部是最新的旧记录，链表尾部是最早的记录</p>
</li>
<li>
<p>readview</p>
<p>ReadView（视图读）是<strong>快照读</strong>SQL执行时MVCC提取数据的依赖，记录并维护系统当前活跃的事务（未提交）id</p>
<table>
<thead>
<tr>
<th style="text-align:center">字段</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">m_ids</td>
<td style="text-align:center">当前活跃的事务ID集合</td>
</tr>
<tr>
<td style="text-align:center">min_trx_id</td>
<td style="text-align:center">最小活跃事务ID</td>
</tr>
<tr>
<td style="text-align:center">max_trx_id</td>
<td style="text-align:center">预分配事务ID，当前最大事务ID+1</td>
</tr>
<tr>
<td style="text-align:center">creator_trx_id</td>
<td style="text-align:center">ReadView创建者的事务ID</td>
</tr>
</tbody>
</table>
<p><strong>RC隔离级别下，在事务中每一次执行快照读时生成ReadView</strong></p>
<p><strong>RR隔离级别下，仅在事务第一次执行快照读时生成ReadView，后续复用该ReadView</strong></p>
</li>
</ul>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20240521174453239.png" alt="image-20240521174453239" /></p>
<h3 id="mysql主从同步"><a class="markdownIt-Anchor" href="#mysql主从同步"></a> MySQL主从同步</h3>
<blockquote>
<p>二进制日志（binlog）记录了所有的DDL（数据定义语言 create drop等）语句和DML（数据操纵语言 update insert等），但不包括数据查询（select show）语句</p>
</blockquote>
<ul>
<li>Master主库在事务提交时会把数据变更记录在二进制日志文件Binlog中</li>
<li>从库读取主库的binlog文件，写入到从库的中继日志relay log</li>
<li>从库重做中继日志中的事件，实现主从同步</li>
</ul>
<h3 id="分库分表"><a class="markdownIt-Anchor" href="#分库分表"></a> 分库分表</h3>
<h3 id="垂直分库"><a class="markdownIt-Anchor" href="#垂直分库"></a> 垂直分库</h3>
<blockquote>
<p>以表为依据，根据业务将不同表拆分到不同库中</p>
</blockquote>
<p>特点：</p>
<ul>
<li>按业务对数据分级管理、维护、监控、扩展</li>
<li>在高并发下，提高磁盘IO和数据量连接数</li>
</ul>
<h3 id="垂直分表"><a class="markdownIt-Anchor" href="#垂直分表"></a> 垂直分表</h3>
<blockquote>
<p>以字段为依据，根据字段属性将不同字段拆分到不同表中；不常用的字段单独放一张表，把text、blob等大字段拆分出来放在附表中</p>
</blockquote>
<p>特点：</p>
<ul>
<li>冷热数据分离</li>
<li>减少IO过度争抢，两表互不影响</li>
</ul>
<h3 id="水平分库"><a class="markdownIt-Anchor" href="#水平分库"></a> 水平分库</h3>
<blockquote>
<p>将一个库的数据拆分到多个库中</p>
</blockquote>
<p>路由规则：</p>
<ul>
<li>根据id取模</li>
<li>按照id范围路由（1-100w）（100w-200w</li>
</ul>
<p>特点：</p>
<ul>
<li>解决了单库大数量、高并发的性能瓶颈问题</li>
<li>提高系统稳定性和可用性</li>
</ul>
<h3 id="水平分表"><a class="markdownIt-Anchor" href="#水平分表"></a> 水平分表</h3>
<blockquote>
<p>将一个表的数据拆分到多个表中（可以在同一个库中）</p>
</blockquote>
<p>特点：</p>
<ul>
<li>优化单表数据过大产生的性能问题</li>
<li>避免IO争抢并减少锁表的几率</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://qingy735.github.io/posts/45296.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/img/title.ico">
      <meta itemprop="name" content="QingY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QingY's Code Space">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | QingY's Code Space">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/45296.html" class="post-title-link" itemprop="url">Java八股-Redis篇</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-05-17 20:32:11" itemprop="dateCreated datePublished" datetime="2024-05-17T20:32:11+08:00">2024-05-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-05-21 16:38:49" itemprop="dateModified" datetime="2024-05-21T16:38:49+08:00">2024-05-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%85%AB%E8%82%A1/" itemprop="url" rel="index"><span itemprop="name">八股</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="java八股-redis篇"><a class="markdownIt-Anchor" href="#java八股-redis篇"></a> Java八股-Redis篇</h1>
<h2 id="使用场景"><a class="markdownIt-Anchor" href="#使用场景"></a> 使用场景</h2>
<h3 id="缓存"><a class="markdownIt-Anchor" href="#缓存"></a> 缓存</h3>
<h4 id="缓存穿透"><a class="markdownIt-Anchor" href="#缓存穿透"></a> 缓存穿透</h4>
<blockquote>
<p>查询一个不存在的数据，mysql查询不到数据也不会直接写入缓存，每次请求都会查数据库</p>
</blockquote>
<p>解决方案：</p>
<ul>
<li>缓存空数据，查询返回的数据为空，仍然把空结果进行缓存（简单、消耗内存，存在不一致问题）</li>
<li>布隆过滤器（缓存预热时初始化）<br />
通过多个hash函数获取hash，将hash结果对应数组位置改为1</li>
</ul>
<h4 id="缓存击穿"><a class="markdownIt-Anchor" href="#缓存击穿"></a> 缓存击穿</h4>
<blockquote>
<p>当某一个key设置了过期时间，当key过期时，恰好有大量请求访问这个key，并发请求压垮数据库</p>
</blockquote>
<p>解决方案：</p>
<ul>
<li>互斥锁<br />
保证数据强一致性，性能差</li>
<li>逻辑过期<br />
热点key不设置过期时间。发现逻辑过期，获取互斥锁，重开线程进行缓存重建并更新过期时间。高可用、性能优，不保证数据绝对一致</li>
</ul>
<h4 id="缓存雪崩"><a class="markdownIt-Anchor" href="#缓存雪崩"></a> 缓存雪崩</h4>
<blockquote>
<p>同一个时间段内缓存key同时失效或者redis宕机，导致大量请求到达数据库</p>
</blockquote>
<p>解决方案：</p>
<ul>
<li>给不同的key的过期时间添加随机值（同时过期）</li>
<li>利用redis集群提高服务可用性</li>
<li>给缓存业务添加降级限流策略（保底策略；防止缓存穿透、击穿、雪崩）</li>
<li>给业务添加多级缓存</li>
</ul>
<h4 id="mysql数据如何和redis进行同步双写一致性"><a class="markdownIt-Anchor" href="#mysql数据如何和redis进行同步双写一致性"></a> mysql数据如何和redis进行同步（双写一致性）</h4>
<h5 id="保证强一致性先删除缓存还是数据库"><a class="markdownIt-Anchor" href="#保证强一致性先删除缓存还是数据库"></a> 保证强一致性，先删除缓存还是数据库</h5>
<blockquote>
<p>延迟双删（数据库主从同步时间，延时时间不好把控且延时过程中会出现脏数据）、redis读写锁</p>
</blockquote>
<ul>
<li>
<p>先删除缓存再删除数据库</p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20240517205825138.png" alt="image-20240517205825138" /></p>
</li>
<li>
<p>先删除数据库再删除缓存</p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20240517205950034.png" alt="image-20240517205950034" /></p>
</li>
</ul>
<h5 id="保证弱一致性"><a class="markdownIt-Anchor" href="#保证弱一致性"></a> 保证弱一致性</h5>
<p>异步通知，保证最终一致性（消息队列，Canal中间件）</p>
<h4 id="redis持久化"><a class="markdownIt-Anchor" href="#redis持久化"></a> redis持久化</h4>
<ul>
<li>RDB（文件小，恢复速度快，数据丢失多）</li>
</ul>
<blockquote>
<p>把内存中的所有数据都记录到磁盘中，redis故障重启后，从磁盘读取快照文件并恢复数据</p>
</blockquote>
<p>bgsave执行原理：<br />
通过<strong>fork</strong>创建子进程复制页表信息，可以访问到磁盘数据。同时采用<strong>copy-on-write</strong> 技术，对磁盘数据进行<strong>read-only</strong> 设置，主进程写操作时拷贝数据副本进行改写，同时读取时也读取副本内容。</p>
<ul>
<li>AOF（追加文件，文件大小大，恢复速度慢，数据丢失少）</li>
</ul>
<blockquote>
<p>记录每次执行命令</p>
</blockquote>
<p>结合两者使用：首先使用RDB进行数据恢复，在使用AOF的增量数据进行数据恢复</p>
<h4 id="redis数据过期策略"><a class="markdownIt-Anchor" href="#redis数据过期策略"></a> redis数据过期策略</h4>
<ul>
<li>
<p>惰性删除（CPU友好，内存占用大）<br />
设置key过期时间后不去管他，需要使用时检查是否过期，过期立马删除，否则返回</p>
</li>
<li>
<p>定期删除<br />
每隔一段时间对一些key进行检查，删除里面过期的key</p>
</li>
</ul>
<p>redis删除策略：<strong>惰性删除</strong>+<strong>定期删除</strong></p>
<h4 id="redis数据淘汰策略"><a class="markdownIt-Anchor" href="#redis数据淘汰策略"></a> redis数据淘汰策略</h4>
<blockquote>
<p>内存不够时，继续添加新的key，redis会按照某种规则将内存中的数据删掉</p>
</blockquote>
<ul>
<li>noeviction（默认策略，不淘汰，禁止写入）</li>
<li>volatile-ttl（ttl越小越先淘汰）</li>
<li>allkeys-random（随机淘汰）</li>
<li>volatile-random（对设置了ttl的的key，随机淘汰）</li>
<li>allkeys-lru（所有key LRU）</li>
<li>volatile-lru（设置了ttl的key LRU）</li>
<li>allkeys-lfu（所有key LFU）</li>
<li>volatile-lfu（设置了ttl的key LFU）</li>
</ul>
<h3 id="分布式锁"><a class="markdownIt-Anchor" href="#分布式锁"></a> 分布式锁</h3>
<blockquote>
<p>分布式环境下synchronized锁无法实现加锁功能</p>
</blockquote>
<h4 id="setnx"><a class="markdownIt-Anchor" href="#setnx"></a> setnx</h4>
<h4 id="redissonlua脚本-原子性"><a class="markdownIt-Anchor" href="#redissonlua脚本-原子性"></a> redisson（lua脚本 原子性）</h4>
<p>加锁（成功），操作redis，另起一个线程（watch dog）每隔一段时间(默认10秒)做一次过期时间的续期<br />
加锁（失败），watch dog执行while循环不断获取锁直到达到等待时间</p>
<blockquote>
<p>redisson加锁可重入，根据线程id，利用hash结构记录线程id和重入次数key-(&lt;threadId, count&gt;)；不能解决主从数据一致性问题</p>
</blockquote>
<h2 id="其他面试题"><a class="markdownIt-Anchor" href="#其他面试题"></a> 其他面试题</h2>
<h3 id="redis主从同步"><a class="markdownIt-Anchor" href="#redis主从同步"></a> redis主从同步</h3>
<h4 id="全量同步"><a class="markdownIt-Anchor" href="#全量同步"></a> 全量同步</h4>
<ul>
<li>从节点发送数据同步请求并附带replid和offset</li>
<li>主节点判断replid是否一致，不一致表示第一次同步，返回自身replid和offset至从节点；一致则直接将repl_backlog发送给从节点，从节点根据对比offset进行数据同步</li>
<li>replid不一致，从节点保存主节点回传的replid和offset，同时主节点执行bgsave生成RDB文件并发送，从节点清空本地数据加载RDB，最后执行主节点发送的repl_backlog文件中的命令</li>
</ul>
<h4 id="增量同步slave重启或后期数据变化"><a class="markdownIt-Anchor" href="#增量同步slave重启或后期数据变化"></a> 增量同步（slave重启或后期数据变化）</h4>
<blockquote>
<p>从节点发送请求，主节点判断是否第一次请求，不是则从repl_backlog中获取offset后的数据发送给从节点，从节点执行命令</p>
</blockquote>
<h3 id="哨兵模式"><a class="markdownIt-Anchor" href="#哨兵模式"></a> 哨兵模式</h3>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20240517222059017.png" alt="image-20240517222059017" /></p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20240517222128710.png" alt="image-20240517222128710" /></p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20240517222145269.png" alt="image-20240517222145269" /></p>
<h3 id="分片集群"><a class="markdownIt-Anchor" href="#分片集群"></a> 分片集群</h3>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20240517222522412.png" alt="image-20240517222522412" /></p>
<h3 id="redis单线程为什么这么快"><a class="markdownIt-Anchor" href="#redis单线程为什么这么快"></a> Redis单线程为什么这么快</h3>
<ul>
<li>Redis是纯内存操作，执行速度快</li>
<li>采用单线程，避免了不必要的上下文切换，多线程还要考虑线程安全问题</li>
<li>使用I/O多路复用模型，非阻塞IO</li>
</ul>
<p>​	Redis性能瓶颈是<strong>网络延迟</strong></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://qingy735.github.io/posts/64965.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/img/title.ico">
      <meta itemprop="name" content="QingY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QingY's Code Space">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | QingY's Code Space">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/64965.html" class="post-title-link" itemprop="url">JVM七连问</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-05-17 17:18:39 / 修改时间：22:37:31" itemprop="dateCreated datePublished" datetime="2024-05-17T17:18:39+08:00">2024-05-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%85%AB%E8%82%A1/" itemprop="url" rel="index"><span itemprop="name">八股</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="jvm七连问"><a class="markdownIt-Anchor" href="#jvm七连问"></a> JVM七连问</h2>
<blockquote>
<p>关于Object o = new Object()</p>
</blockquote>
<h3 id="1-请解释一下对象的创建过程半初始化"><a class="markdownIt-Anchor" href="#1-请解释一下对象的创建过程半初始化"></a> 1、请解释一下对象的创建过程（半初始化）</h3>
<blockquote>
<p>申请空间 - 初始化 - 引用</p>
</blockquote>
<p>JVM首先检查当前类是否被加载解析和初始化过，如果没有就先执行对应的类加载器；如果加载了就为新对象分配内存空间，并且将分配的内存空间初始化为零值（成员变量，数值类型是 0，布尔类型是 false，对象类型是 null），接下来设置对象头，最后JVM执行构造方法（<init>），将成员变量赋值为预期的值。</p>
<h3 id="2-dcldouble-check-lock要不要加volatile问题指令重排"><a class="markdownIt-Anchor" href="#2-dcldouble-check-lock要不要加volatile问题指令重排"></a> 2、DCL（double check lock）要不要加volatile问题（指令重排）</h3>
<p><strong>synchronized</strong> 内部可以重排序，锁的外部可以访问到中间状态</p>
<p>必须要加 <strong>volatile</strong>(保证线程之间的可见性和禁止指令重排序（内存屏障）)</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SingleObject</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> <span class="token class-name">SingleObject</span> <span class="token constant">INSTANCE</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">SingleObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SingleObject</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">INSTANCE</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">SingleObject</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">INSTANCE</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
                        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">&#125;</span>
                    <span class="token constant">INSTANCE</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SingleObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">return</span> <span class="token constant">INSTANCE</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="3-对象在内存中的存储布局对象与数据的存储不同"><a class="markdownIt-Anchor" href="#3-对象在内存中的存储布局对象与数据的存储不同"></a> 3、对象在内存中的存储布局（对象与数据的存储不同）</h3>
<ul>
<li>Markword（64位机器8字节 32位机器4字节）</li>
<li>类型指针（4字节）</li>
<li>实例数据（String类型4字节）</li>
<li>对齐（被8整除）</li>
</ul>
<h3 id="4-对象头具体包括什么"><a class="markdownIt-Anchor" href="#4-对象头具体包括什么"></a> 4、对象头具体包括什么</h3>
<p><strong>markword</strong> 和 <strong>class pointer</strong></p>
<h4 id="markword"><a class="markdownIt-Anchor" href="#markword"></a> markword</h4>
<ul>
<li>锁信息</li>
<li>GC信息</li>
<li>hashcode</li>
</ul>
<h3 id="5-对象怎么定位"><a class="markdownIt-Anchor" href="#5-对象怎么定位"></a> 5、对象怎么定位</h3>
<p><strong>直接</strong> 和 <strong>间接</strong></p>
<ul>
<li>
<p>直接（默认）<br />
直接指针，仅包含实例数据，实例数据中包含类型数据指针指向方法区中的T.class</p>
<p>速度快</p>
</li>
<li>
<p>间接<br />
句柄方式，包含实例数据指针和类型数据指针</p>
<p>对象在内存中移动位置，地址不用变</p>
</li>
</ul>
<h3 id="6-对象怎么分配"><a class="markdownIt-Anchor" href="#6-对象怎么分配"></a> 6、对象怎么分配</h3>
<blockquote>
<p>栈上 - 线程本地 - Eden - Old</p>
</blockquote>
<ul>
<li>尝试分配到栈上（逃逸分析、标量替换）</li>
<li>足够大直接分配到老年代</li>
<li>TLAB（给每个线程在伊甸区的一个独立空间，线程同步）</li>
<li>分配到伊甸区</li>
</ul>
<h3 id="7-object-o-new-object在内存中占多少字节"><a class="markdownIt-Anchor" href="#7-object-o-new-object在内存中占多少字节"></a> 7、Object o = new Object()在内存中占多少字节</h3>
<p><strong>16字节</strong></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://qingy735.github.io/posts/28786.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/img/title.ico">
      <meta itemprop="name" content="QingY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QingY's Code Space">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | QingY's Code Space">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/28786.html" class="post-title-link" itemprop="url">24-04-18番茄小说一面</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-04-21 21:09:26 / 修改时间：21:29:51" itemprop="dateCreated datePublished" datetime="2024-04-21T21:09:26+08:00">2024-04-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%9D%A2%E7%BB%8F/" itemprop="url" rel="index"><span itemprop="name">面经</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="24-04-18番茄小说一面"><a class="markdownIt-Anchor" href="#24-04-18番茄小说一面"></a> 24-04-18番茄小说一面</h2>
<h3 id="问题"><a class="markdownIt-Anchor" href="#问题"></a> 问题：</h3>
<ul>
<li>拷打项目</li>
<li>项目中的分布式id生成器：id产生浪费、超过id段情况（超过直接返回null）、数据库交互</li>
<li>其他的id生成器（本地的那种）：UUID、雪花算法</li>
<li>数据库分库</li>
<li>主从数据库一致性怎么保证（binlog）</li>
<li>redis用过哪写数据结构（场景）string底层实现</li>
<li>mysql多表设计（关联关系、结构设计等）</li>
<li>场景题：电影售票系统（怎么设计表，表的字段）</li>
<li><strong>volatile</strong> 、<strong>synchronized</strong> 、<strong>ReentrantLock <strong>那个熟，说前两个，让讲一下</strong>volatile</strong></li>
<li>讲一下RockerMQ（原理）</li>
<li>Http和Https区别</li>
<li>https怎么加密，加密过程</li>
<li>mysql慢查询，怎么识别慢查询（<strong>explain</strong>）</li>
</ul>
<h3 id="算法"><a class="markdownIt-Anchor" href="#算法"></a> 算法：</h3>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20240421212628862.png" alt="image-20240421212628862" /></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://qingy735.github.io/posts/29339.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/img/title.ico">
      <meta itemprop="name" content="QingY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QingY's Code Space">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | QingY's Code Space">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/29339.html" class="post-title-link" itemprop="url">24-04-15美团移动面2</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-04-21 20:29:52 / 修改时间：21:10:39" itemprop="dateCreated datePublished" datetime="2024-04-21T20:29:52+08:00">2024-04-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%9D%A2%E7%BB%8F/" itemprop="url" rel="index"><span itemprop="name">面经</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="24-04-15美团前端移动端面2"><a class="markdownIt-Anchor" href="#24-04-15美团前端移动端面2"></a> 24-04-15美团前端&amp;移动端面2</h2>
<blockquote>
<p>上次面了一次后估计是被刷了，简历又被捞起来了重新拷打！</p>
</blockquote>
<h3 id="问题"><a class="markdownIt-Anchor" href="#问题"></a> 问题：</h3>
<ul>
<li>
<p>线程和进程的区别</p>
</li>
<li>
<p>TCP三次握手</p>
</li>
<li>
<p>为什么要三次握手、两次不行吗</p>
</li>
<li>
<p><strong>get</strong> 和 <strong>post</strong> 请求区别</p>
</li>
<li>
<p><strong>String</strong>、<strong>StringBuilder</strong>、<strong>StringBuffer</strong>区别</p>
</li>
<li>
<p><strong>String</strong>为什么要设计成不可变的</p>
</li>
<li>
<p>Java泛型</p>
</li>
<li>
<p><strong>HashMap</strong> 实现原理</p>
</li>
<li>
<p>扩容算法</p>
</li>
<li>
<p><strong>ConCurrentHashMap</strong></p>
</li>
<li>
<p><strong>synchronized</strong> 和 <strong>volatile</strong> 区别</p>
</li>
<li>
<p><strong>synchronized</strong> 修饰哪写</p>
</li>
<li>
<p>保证线程安全有哪些方式</p>
</li>
<li>
<p><strong>notify</strong> 和 <strong>notifyAll</strong></p>
</li>
<li>
<p>使用场景（使用位置）要求</p>
</li>
<li>
<p>垃圾回收机制</p>
</li>
<li>
<p>怎么判断对象是否要被回收（可达性分析、引用计数）</p>
</li>
<li>
<p>有哪些可以被当做 <strong>GCRoots</strong></p>
<ul>
<li>
<p>JVM栈中的引用（方法参数、局部变量等）</p>
</li>
<li>
<p>本地方法栈中的JNI引用</p>
</li>
<li>
<p>类静态变量</p>
</li>
<li>
<p>运行时常量池中的常量（String、Class类型）</p>
</li>
</ul>
</li>
<li>
<p>强引用、软引用、弱引用、虚引用区别</p>
</li>
<li>
<p>说一下哪写技能会在职业领域反复使用（比较开放，技术、沟通、协作…）</p>
</li>
</ul>
<h3 id="算法"><a class="markdownIt-Anchor" href="#算法"></a> 算法:</h3>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20240421210237894.png" alt="image-20240421210237894" /></p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20240421210438785.png" alt="image-20240421210438785" /></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://qingy735.github.io/posts/51273.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/img/title.ico">
      <meta itemprop="name" content="QingY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QingY's Code Space">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | QingY's Code Space">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/51273.html" class="post-title-link" itemprop="url">24-04-10美团移动面</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-04-10 16:56:58" itemprop="dateCreated datePublished" datetime="2024-04-10T16:56:58+08:00">2024-04-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-04-21 20:30:33" itemprop="dateModified" datetime="2024-04-21T20:30:33+08:00">2024-04-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%9D%A2%E7%BB%8F/" itemprop="url" rel="index"><span itemprop="name">面经</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="24-04-10美团前端移动端面"><a class="markdownIt-Anchor" href="#24-04-10美团前端移动端面"></a> 24-04-10美团前端&amp;移动端面</h2>
<h3 id="问题"><a class="markdownIt-Anchor" href="#问题"></a> 问题：</h3>
<ul>
<li>
<p><strong>安卓四大组件（不会直接问Java了）</strong></p>
</li>
<li>
<p><strong>说一下StringBuilder和StringBuffer区别</strong></p>
<p>StringBuilder与StringBuffer功能类似，但是StringBuffer是线程安全的，方法都添加了synchronized关键字。</p>
</li>
<li>
<p><strong>为什么不直接使用String而要用StringBuilder或者StringBuffer</strong></p>
<p>String类的对象是不可变的，一旦String对象被创建，所包含的字符串内容是不可改变的。每次对String对象进行修改操作都会生成一个新的String对象，导致大量的内存开销。而StringBuffer和StringBuilder的字符串修改操作都是直接在原有字符串对象的底层数组上进行的，而不会生成新的String对象。</p>
</li>
<li>
<p><strong>String内部成员变量、.length()方法时间复杂度多少</strong></p>
<p>以JDK8为例：包含final修饰的 <strong>char数组</strong> 和 <strong>hash</strong></p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20240410185212778.png" alt="image-20240410185212778" /></p>
<p>其中 <strong>.length()</strong> 方法调用的是 <strong>value</strong> 数组的 <strong>length</strong> 属性</p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20240410185423398.png" alt="image-20240410185423398" /></p>
</li>
<li>
<p><strong>如何将String设计成动态容量的</strong></p>
<p>问的是C++中string是可变的，能不能Java的String也实现动态长度？</p>
</li>
<li>
<p><strong>Map底层数据结构？？？如何保证key唯一</strong></p>
<p>回答的HashMap，说Map类似？不懂啥意思</p>
</li>
<li>
<p><strong>Java与C++区别</strong></p>
</li>
<li>
<p><strong>JVM、垃圾回收</strong></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/csdnliuxin123524/article/details/81303711">JVM原理最全、清晰、通俗讲解，五天40小时吐血整理_jvm原理讲解教程最全清晰通俗讲解-CSDN博客</a></p>
</li>
<li>
<p><strong>C++源文件如何到机器码？还是字节码如何到机器码</strong></p>
</li>
<li>
<p><strong>网页输入网址到显示内容发生了什么</strong></p>
<p>1、DNS解析：发送DNS请求（浏览器缓存、本地缓存、hosts文件），发送给本地DNS服务器（缓存有直接返回），没有询问根域名服务器，根据根域名的指示找到对应的DNS服务器得到IP地址</p>
<p>2、TCP连接 三次握手</p>
<p>3、发送HTTP请求给服务器</p>
<p>4、服务器处理请求并返回响应报文</p>
<p>5、浏览器解析渲染页面</p>
<p>6、结束连接 四次挥手</p>
</li>
<li>
<p><strong>不同局域网可能包含相同ip，顶端DNS如何将查询到的信息返还给请求主机</strong></p>
<p>不懂</p>
</li>
<li>
<p><strong>线程池、如何设计</strong></p>
<p>核心线程数、最大线程数、非核心线程存活时间、阻塞队列、拒绝策略、线程工厂</p>
</li>
<li>
<p>其他忘了。。。</p>
</li>
</ul>
<h3 id="算法"><a class="markdownIt-Anchor" href="#算法"></a> 算法：</h3>
<ul>
<li>
<p>树的最近祖先</p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/e3698b209adb05022f00c94a63c9485b.png" alt="e3698b209adb05022f00c94a63c9485b" /></p>
</li>
<li>
<p>最长合法括号序列</p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/5eb3f230d9be3dcbdd9a43ede7b36c8b.png" alt="5eb3f230d9be3dcbdd9a43ede7b36c8b" /></p>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://qingy735.github.io/posts/38331.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/img/title.ico">
      <meta itemprop="name" content="QingY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QingY's Code Space">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | QingY's Code Space">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/38331.html" class="post-title-link" itemprop="url">《Lightweight Remote Sensing Change Detection With Progressive Feature Aggregation and Supervised Attention》笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-02-22 14:07:37" itemprop="dateCreated datePublished" datetime="2023-02-22T14:07:37+08:00">2023-02-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-04-07 17:03:29" itemprop="dateModified" datetime="2024-04-07T17:03:29+08:00">2024-04-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%AE%BA%E6%96%87/" itemprop="url" rel="index"><span itemprop="name">论文</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>原文地址：<a target="_blank" rel="noopener" href="https://ieeexplore.ieee.org/document/10034814">Lightweight Remote Sensing Change Detection With Progressive Feature Aggregation and Supervised Attention</a></p>
</blockquote>
<h2 id="摘要"><a class="markdownIt-Anchor" href="#摘要"></a> 摘要</h2>
<h3 id="问题"><a class="markdownIt-Anchor" href="#问题"></a> 问题</h3>
<p>尽管之前的基于CNN的方法能够取得不错的结果，但是模型的内存和计算成本太高，很难在实际中应用</p>
<h3 id="工作"><a class="markdownIt-Anchor" href="#工作"></a> 工作</h3>
<p>提出一种新颖的轻量级网络，它通过渐进式特征聚合和监督注意力，根据移动网络提取的特征识别变化</p>
<ul>
<li>设计了一个neighbor aggregation module（NAM）来融合主干网络邻近阶段的特征，用来增强时间特征的表示能力</li>
<li>提出progressive change identifying module（PCI）从双时相特征中提取时间差异信息</li>
<li>设计了supervised attention模块（SAM）来对特征重新加权，以有效地从高层到低层聚合多级特征</li>
</ul>
<h2 id="引言"><a class="markdownIt-Anchor" href="#引言"></a> 引言</h2>
<h3 id="先前方法缺点"><a class="markdownIt-Anchor" href="#先前方法缺点"></a> 先前方法缺点</h3>
<p>参数量和计算成本太大，不利于模型在真实世界的部署实现</p>
<h3 id="解决方法"><a class="markdownIt-Anchor" href="#解决方法"></a> 解决方法</h3>
<ol>
<li>使用轻量的特征提取网络（MobileNetV2），同时为了弥补特征表示能力的不足，构建NAM来增强特征表示能力</li>
<li>设计一个具有轻量化模块的decoder，PCI、SAM</li>
</ol>
<h3 id="主要贡献"><a class="markdownIt-Anchor" href="#主要贡献"></a> 主要贡献</h3>
<ol>
<li>提出轻量化模型A2Net（3.78 M parameters and 6.02 G FLOPs），并且取得了sota</li>
<li>提出NAM增强backbone特征表示能力</li>
<li>提出PCI逐步找到不同特征级别的时间变化信息以准确识别变化对象，并且使用SAM来重新加权特征以实现渐进的特征聚合</li>
</ol>
<h2 id="方法"><a class="markdownIt-Anchor" href="#方法"></a> 方法</h2>
<h3 id="网络结构"><a class="markdownIt-Anchor" href="#网络结构"></a> 网络结构</h3>
<p>首先通过骨干网络提取多尺度特征，然后经过<strong>NAM</strong>对特征进行增强，最后获得差分特征。后面先将差分特征输入<strong>PCIM</strong>中进行差异特征增强然后经过<strong>SAM</strong>对特征进行重新加权，输出预测图。</p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20230224103752830.png" alt="image-20230224103752830" /></p>
<h3 id="nam"><a class="markdownIt-Anchor" href="#nam"></a> NAM</h3>
<p>由于backbone采用的是移动网络MobileNetV2，所以提取到的特征表征能力较弱，于是提出<strong>NAM</strong>对特征进行增强。具体操作为：所提取特征上下阶段特征分别进行最大池化和上采样后经过卷积与当前阶段特征进行<strong>concat</strong>，而后当前特征通过1×1卷积构成一个残差网络，保持当前阶段特征的主要信息。</p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20230224113134285.png" alt="image-20230224113134285" /></p>
<h3 id="pcim"><a class="markdownIt-Anchor" href="#pcim"></a> PCIM</h3>
<p>PCIM主要是为了成分挖掘差异特征中的变化信息，输入特征从大感受野到小感受野逐步挖掘变化信息。</p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20230224113608045.png" alt="image-20230224113608045" /></p>
<h3 id="sam"><a class="markdownIt-Anchor" href="#sam"></a> SAM</h3>
<p>在上一步通过<strong>PCIM</strong>已经充分挖掘了变化信息，但是由于高级特征缺少上下文信息的指导，容易造成噪声等无关信息。所以<strong>SAM</strong>旨在对特征进行重新加权，确保变化特征能够得到更多的关注，忽略无关特征。该模块首先经过1×1卷积然后通过激活层。最后得到变化图（值为0-1）和非变化图（用全1矩阵减去变化图），将两者进行<strong>concat</strong>，通过1×1卷积后作为权重map与原特征进行点乘，最后得到重加权的特征。</p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20230224114240434.png" alt="image-20230224114240434" /></p>
<h2 id="实验"><a class="markdownIt-Anchor" href="#实验"></a> 实验</h2>
<h3 id="对比实验"><a class="markdownIt-Anchor" href="#对比实验"></a> 对比实验</h3>
<p>该模型相比于其他的方法具有更好的效果。如图7第三行所示，相同的建筑物在不同的时间显示不同的颜色，从而导致一些与真实建筑物变化相反的无关变化，该方法能够较好地检测出变化区域；同时图8第六行，许多方法无法区分包含与建筑物外观相似的道路的伪变化。相反，所提出的方法可以很好地识别建筑物变化的边界和主体。</p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20230224114942640.png" alt="image-20230224114942640" /></p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20230224114957987.png" alt="image-20230224114957987" /></p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20230224115022493.png" alt="image-20230224115022493" /></p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20230224115046949.png" alt="image-20230224115046949" /></p>
<h3 id="消融实验"><a class="markdownIt-Anchor" href="#消融实验"></a> 消融实验</h3>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20230224115119249.png" alt="image-20230224115119249" /></p>
<h2 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h2>
<ol>
<li><strong>NAM</strong>对于特征有较好的增强效果，特征交互类似思路可行</li>
<li><strong>PCIM</strong>中利用不同感受野挖掘特征潜在信息也能够较好地运行，在对于较小分辨率特征是否可行？</li>
<li><strong>SAM</strong>类似于自注意力机制，主要是通过变化图和非变化图生成特征权重图。</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://qingy735.github.io/posts/35686.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/img/title.ico">
      <meta itemprop="name" content="QingY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QingY's Code Space">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | QingY's Code Space">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/35686.html" class="post-title-link" itemprop="url">《RACDNet：Resolution- and Alignment-Aware Change Detection Network for Optical Remote Sensing Imagery》笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-11-25 11:52:16" itemprop="dateCreated datePublished" datetime="2022-11-25T11:52:16+08:00">2022-11-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-04-03 20:14:36" itemprop="dateModified" datetime="2024-04-03T20:14:36+08:00">2024-04-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%AE%BA%E6%96%87/" itemprop="url" rel="index"><span itemprop="name">论文</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>论文地址：<a target="_blank" rel="noopener" href="https://www.mdpi.com/2072-4292/14/18/4527">Remote Sensing | Free Full-Text | RACDNet: Resolution- and Alignment-Aware Change Detection Network for Optical Remote Sensing Imagery</a></p>
</blockquote>
<h2 id="摘要"><a class="markdownIt-Anchor" href="#摘要"></a> 摘要</h2>
<h3 id="动机"><a class="markdownIt-Anchor" href="#动机"></a> 动机</h3>
<p>变化检测任务是基于等效分辨率的共同配准多时相图像。由于传感器成像条件和重访周期的限制，很难获得所需的图像，特别是在紧急情况下。此外，准确的多时相图像配准在很大程度上受到大量对象变化和匹配算法的限制。</p>
<h3 id="主要思路"><a class="markdownIt-Anchor" href="#主要思路"></a> 主要思路</h3>
<ul>
<li>首先，提出了一种基于WDSR的轻量级超分辨率网络。为了更好地恢复高频细节信息，计算梯度权重并将其分配给不同的区域，从而迫使网络集中在难以重建的区域。</li>
<li>为了减轻过度平滑的影响，进一步引入了对抗损失和感知损失，以提高重建图像的视觉感知质量</li>
<li>在孪生U-Net中为了对齐双时态深度特征，可变形卷积单元 (DCU) 通过使用学习到的偏移量扭曲特征图来使用。</li>
<li>解码器中为了弥合编码器和解码器之间的语义鸿沟，嵌入了一个有效的注意单元（AU）。</li>
</ul>
<h3 id="主要工作"><a class="markdownIt-Anchor" href="#主要工作"></a> 主要工作</h3>
<ul>
<li>提出了一种新颖的超分辨率网络，它在恢复 RS 图像中的高频细节方面简单而有效。</li>
<li>提出了一种对齐感知 CD 网络，其中可以通过使用 DCU、ACU 和注意机制进一步引入双时态深度特征来显式对齐以提高 CD 性能</li>
</ul>
<h2 id="网络结构"><a class="markdownIt-Anchor" href="#网络结构"></a> 网络结构</h2>
<p>整体网络结构分为两部分，第一部分为将图像转为高分辨率图像来凸显高频部分，使得特征中高频细节信息更加丰富。第二部分为特征提取和变化信息生成部分，主要采用孪生U-Net网络结构进行特征提取，并且在双时相图像融合的过程中采用DCU模块进行图像特征配准，<strong>解决图像配准问题</strong></p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221125120756581.png" alt="image-20221125120756581" /></p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221125120956911.png" alt="image-20221125120956911" /></p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221125121009521.png" alt="image-20221125121009521" /></p>
<h3 id="dcu"><a class="markdownIt-Anchor" href="#dcu"></a> DCU</h3>
<p>首先将双时相特征进行concat然后通过卷积层输出各个坐标的位移矩阵（即当前像素位置应当如何调整，分为x、y两个方向），之后将位移矩阵与对应特征相乘便得到了配准之后的特征，后续就可以做对应操作了。</p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221125121232605.png" alt="image-20221125121232605" /></p>
<h3 id="au"><a class="markdownIt-Anchor" href="#au"></a> AU</h3>
<p>因为深层特征包含丰富的语义信息，能够很好地识别背景和前景，所以通过通道注意力得到深层特征的通道级别注意力来重新校准低级特征，不仅减轻了语义鸿沟而且还能很好地融合高级特征的语义特征和低级特征的细节信息。</p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221125121726955.png" alt="image-20221125121726955" /></p>
<h2 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h2>
<p>图像高频信息在后续实验中可以着重思考，并且特征对齐、配准等也有实验价值。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://qingy735.github.io/posts/6529.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/img/title.ico">
      <meta itemprop="name" content="QingY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QingY's Code Space">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | QingY's Code Space">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/6529.html" class="post-title-link" itemprop="url">《SwinSUNet：Pure Transformer Network for Remote Sensing Image Change Detection》笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-11-24 17:55:38" itemprop="dateCreated datePublished" datetime="2022-11-24T17:55:38+08:00">2022-11-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-04-03 20:14:36" itemprop="dateModified" datetime="2024-04-03T20:14:36+08:00">2024-04-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%AE%BA%E6%96%87/" itemprop="url" rel="index"><span itemprop="name">论文</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>论文地址：<a target="_blank" rel="noopener" href="https://ieeexplore.ieee.org/document/9736956">SwinSUNet: Pure Transformer Network for Remote Sensing Image Change Detection</a></p>
</blockquote>
<h2 id="摘要"><a class="markdownIt-Anchor" href="#摘要"></a> 摘要</h2>
<h3 id="动机"><a class="markdownIt-Anchor" href="#动机"></a> 动机</h3>
<p><strong>虽然CNN在CD领域取得了很大的成就，但由于卷积运算固有的局域性，无法捕获时空中的全局信息。</strong> 而Transformer可以有效地提取全局信息，因此被用来解决计算机视觉任务。</p>
<h3 id="主要工作"><a class="markdownIt-Anchor" href="#主要工作"></a> 主要工作</h3>
<ul>
<li>
<p>设计了一个具有孪生U-Net结构的纯Transformer网络来解决CD问题。SwinSUNet包含Encoder、Decoder、Fusion三个部分，均以Swin Transformer block为基本单元</p>
<p>Encoder具有分层的Swin Transformer孪生网络结构，因此可以并行处理双时相图像并提取其多尺度特征</p>
<p>Fusion模块主要负责将Encoder生成的双时相特征进行融合</p>
<p>Decoder结构与Encoder不同的地方在于多了upsampling and mreging（UM）模块，用来恢复变化信息的细节</p>
</li>
</ul>
<h2 id="网络结构"><a class="markdownIt-Anchor" href="#网络结构"></a> 网络结构</h2>
<p>Encoder首先使用patch partition和linear embedding将输入图像转为image token；随后，Encoder生成多尺度特征；最后Decoder使用Swin Transformer逐步预测变化信息。</p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221124180737892.png" alt="image-20221124180737892" /></p>
<h3 id="encoder"><a class="markdownIt-Anchor" href="#encoder"></a> Encoder</h3>
<p>patch partition模块负责将图像转换成多个token，linear embedding模块负责将每个token的通道号映射到指定维度。</p>
<h3 id="fusion"><a class="markdownIt-Anchor" href="#fusion"></a> Fusion</h3>
<p>将双时相特征进行concat和现行映射后输入Swin Transformer block得到变化特征。</p>
<h3 id="decoder"><a class="markdownIt-Anchor" href="#decoder"></a> Decoder</h3>
<p>首先将输入特征进行上采样，然后与Encoder生成的对应尺度特征进行concat，然后为了更好地识别前景和背景使用通道注意力，最后经过一个线性映射处理得到细化后的变化特征。</p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221124181559106.png" alt="image-20221124181559106" /></p>
<p>其中上采样部分采用Patch reshaping方法，没有扩充特征通道，从而减少了特征的冗余同时见少了计算量，有利于变化信息的提取。</p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221124181611531.png" alt="image-20221124181611531" /></p>
<h2 id="实验"><a class="markdownIt-Anchor" href="#实验"></a> 实验</h2>
<h3 id="对比实验"><a class="markdownIt-Anchor" href="#对比实验"></a> 对比实验</h3>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221124181942362.png" alt="image-20221124181942362" /></p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221124181957008.png" alt="image-20221124181957008" /></p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221124182009306.png" alt="image-20221124182009306" /></p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221124182020672.png" alt="image-20221124182020672" /></p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221124182033820.png" alt="image-20221124182033820" /></p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221124182051293.png" alt="image-20221124182051293" /></p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221124182105146.png" alt="image-20221124182105146" /></p>
<h3 id="消融实验"><a class="markdownIt-Anchor" href="#消融实验"></a> 消融实验</h3>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221124182152509.png" alt="image-20221124182152509" /></p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221124182213838.png" alt="image-20221124182213838" /></p>
<h2 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h2>
<p>总的看下来最大的贡献应该就是使用出Swin Transformer模块了，至于参数量相比于纯CNN实现的孪生U-Net网络如何论文中没有提到。如果参数量能够大量下降的话应该算不错的方向，其次也证明了纯Swin Transformer能够处理CD任务。另一方面Path reshape算半个贡献点吧，后续实验上采样可以尝试使用该方法。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://qingy735.github.io/posts/2293.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/img/title.ico">
      <meta itemprop="name" content="QingY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QingY's Code Space">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | QingY's Code Space">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/2293.html" class="post-title-link" itemprop="url">《A Deeply Supervised Attention Metric-Based Network and an Open Aerial Image Dataset for Remote Sensing Change Detection》笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-11-23 10:24:44" itemprop="dateCreated datePublished" datetime="2022-11-23T10:24:44+08:00">2022-11-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-04-03 20:14:36" itemprop="dateModified" datetime="2024-04-03T20:14:36+08:00">2024-04-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%AE%BA%E6%96%87/" itemprop="url" rel="index"><span itemprop="name">论文</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>论文地址：<a target="_blank" rel="noopener" href="https://ieeexplore.ieee.org/document/9467555">A Deeply Supervised Attention Metric-Based Network and an Open Aerial Image Dataset for Remote Sensing Change Detection</a></p>
</blockquote>
<h2 id="摘要"><a class="markdownIt-Anchor" href="#摘要"></a> 摘要</h2>
<h3 id="动机"><a class="markdownIt-Anchor" href="#动机"></a> 动机</h3>
<p>尽管近几年深度学习方法在变化检测中取得了很多实质性突破，但是<strong>变化检测的结果容易受到光照、噪声、和尺度等外部因素的影响，从而导致检测图中出现伪变化和噪声</strong></p>
<h2 id="主要工作"><a class="markdownIt-Anchor" href="#主要工作"></a> 主要工作</h2>
<ul>
<li>
<p>提出了一种基于 <strong>深度监督（DS）</strong> 注意力度量的网络（DSAMNet）</p>
</li>
<li>
<p>集成CBAM模块，在空间和通道方面获得更具有辨别力的特征；使用深度监督以实现更好的特征提取</p>
</li>
<li>
<p>提出了一个新的变化检测数据集SYSU-CD，并且模型在CDD和SYSU-CD上取得了很好的效果</p>
</li>
</ul>
<h2 id="网络结构"><a class="markdownIt-Anchor" href="#网络结构"></a> 网络结构</h2>
<p>DSAMNet整体结构图如下所示，主要可以分为三部分：特征提取、度量学习、深度监督。特征提取部分主要采用ResNet网络进行多尺度多深度特征的提取；度量学习部分首先将输入特征经过CBAM模块处理得到更具有辨别性的特征，然后计算双时相特征之间的距离，最后根据<strong>BCL Loss</strong>进行优化；深度监督部分主要由一个深度监督层和损失计算构成，深度监督层负责将特征上采样到输入图像大小。</p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221123103155809.png" alt="image-20221123103155809" /></p>
<h3 id="cbam"><a class="markdownIt-Anchor" href="#cbam"></a> CBAM</h3>
<p>CBAM模块主要进行通道注意力和空间注意力处理，空间注意力和通道注意力均采用最大池化和平均池化处理，不过一个在空间维度，另一个在通道维度。</p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221123104338589.png" alt="image-20221123104338589" /></p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221123104548679.png" alt="image-20221123104548679" /></p>
<h3 id="度量学习模块"><a class="markdownIt-Anchor" href="#度量学习模块"></a> 度量学习模块</h3>
<p><strong>为了充分利用低层特征中丰富的空间信息和高层特征中的语义信息</strong>，首先将ResNet提取到的每一层特征进行通道统一（全部变成96，并且统一尺寸为输入图像的一半），然后将每一层的特征进行concat后输入到CBAM模块计算双时相特征之间的距离，最后和GT进行计算BCL Loss。其中BCL Loss计算如下图所示</p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221123104632659.png" alt="image-20221123104632659" /></p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221123110522900.png" alt="image-20221123110522900" /></p>
<h3 id="深度监督模块"><a class="markdownIt-Anchor" href="#深度监督模块"></a> 深度监督模块</h3>
<p>由于网络的中间层的训练是不透明的而且缺乏监督，所以中间层并不能很好地学习有效特征，所以使用深度监督模块来增强浅层特征的表征能力。主要针对前两层特征进行深度监督处理，文章中提到这两层同时具备丰富的空间信息和语义信息。在输出变化图后与GT进行Dice Loss计算来优化网络。</p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221123121048547.png" alt="image-20221123121048547" /></p>
<h2 id="实验"><a class="markdownIt-Anchor" href="#实验"></a> 实验</h2>
<h3 id="对比实验"><a class="markdownIt-Anchor" href="#对比实验"></a> 对比实验</h3>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221123122838424.png" alt="image-20221123122838424" /></p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221123122847259.png" alt="image-20221123122847259" /></p>
<h3 id="可视化对比实验"><a class="markdownIt-Anchor" href="#可视化对比实验"></a> 可视化对比实验</h3>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221123122911508.png" alt="image-20221123122911508" /></p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221123122929541.png" alt="image-20221123122929541" /></p>
<h3 id="消融实验"><a class="markdownIt-Anchor" href="#消融实验"></a> 消融实验</h3>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221123123000141.png" alt="image-20221123123000141" /></p>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221123123021835.png" alt="image-20221123123021835" /></p>
<h3 id="超参lambda实验"><a class="markdownIt-Anchor" href="#超参lambda实验"></a> 超参<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>λ</mi></mrow><annotation encoding="application/x-tex">\lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">λ</span></span></span></span>实验</h3>
<p><img src="https://gitee.com/qingy735/blogimg/raw/master/img/image-20221123123122491.png" alt="image-20221123123122491" /></p>
<h2 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h2>
<ul>
<li>
<p>本文提出了一种新的深度学习处理变化检测的方法：使用CBAM模块直接从特征中学习到变化图，同时使用辅助深度监督模块。用于生成具有更多空间信息的变化图。</p>
</li>
<li>
<p>CBAM可以有效地使特征更具有判别性，从而辅助度量模块的学习；同时深度监督模块可以很好地利用中间块特征中包含的信息，从而进一步改进度量模块学习到的变化图。</p>
</li>
<li>
<p>通过在CDD、SYSU-CD数据集上实验表示该方法结果优于其他最先进的方法。</p>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">QingY</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.31/dist/fancybox/fancybox.umd.js" integrity="sha256-a+H7FYzJv6oU2hfsfDGM2Ohw/cR9v+hPfxHCLdmCrE8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  



  <script src="/js/third-party/fancybox.js"></script>



  





</body>
</html>
